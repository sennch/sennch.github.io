<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Custom QnA Website</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #f5f5f5;
      overflow: hidden;
    }

    .hidden { display: none; }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #a77dff;
      color: white;
      font-weight: bold;
    }

    /* --- Setup Screen --- */
    #setup {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      gap: 20px;
      background: #fafafa;
    }

    .draggable {
      padding: 10px 20px;
      background: #e0d4fc;
      border-radius: 8px;
      cursor: move;
      position: absolute;
    }

    .controls {
      margin-top: 300px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* --- Preview & QnA Screen --- */
    #preview, #qna {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }

    .background {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0; left: 100%;
      background-size: cover;
      background-position: center;
      transition: left 0.8s ease;
    }

    .background.active {
      left: 0;
    }

    .question, .option {
      position: absolute;
      font-size: 1.2rem;
      padding: 10px 20px;
      background: rgba(255,255,255,0.7);
      border-radius: 10px;
      cursor: default;
    }

    .option {
      background: #ffe1ec;
      cursor: pointer;
    }

    .arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2rem;
      padding: 10px;
      background: rgba(0,0,0,0.4);
      color: white;
      border-radius: 50%;
      cursor: pointer;
      user-select: none;
    }

    .arrow.left { left: 20px; }
    .arrow.right { right: 20px; }

    .bottom-btn {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
    }
  </style>
</head>
<body>

  <!-- Setup Screen -->
  <div id="setup">
    <h2>âœ¨ Customize Your QnA âœ¨</h2>
    <div id="dummy-question" class="draggable" style="top:100px; left:100px;">[Pertanyaan Dummy]</div>
    <div id="dummy-option1" class="draggable" style="top:200px; left:100px;">[Opsi 1]</div>
    <div id="dummy-option2" class="draggable" style="top:260px; left:100px;">[Opsi 2]</div>

    <div class="controls">
      <label>Pilih warna teks: <input type="color" id="textColor" value="#000000"></label>

      <label>Pilih lagu:
        <select id="musicSelect">
          <option value="song/EMINENCE _ Trailer Sound Effects.mp3">Lagu 1</option>
          <option value="song/Music Intro Fashion Saxophone Hip-Hop No Copyright 30 Seconds (by Infraction).mp3">Lagu 2</option>
        </select>
      </label>

      <button id="toPreviewBtn">Lanjut ke Preview</button>
    </div>
  </div>

  <!-- Preview Screen -->
  <div id="preview" class="hidden">
    <div id="pbg1" class="background active" style="background-image:url('bg/bg.jpg')"></div>
    <div id="pbg2" class="background" style="background-image:url('bg/bg 3.jpg')"></div>
    <div id="pbg3" class="background" style="background-image:url('bg/bg 2.jpg')"></div>

    <div id="pquestion" class="question">[Pertanyaan Dummy]</div>
    <div id="poption1" class="option">[Opsi 1]</div>
    <div id="poption2" class="option">[Opsi 2]</div>

    <div class="arrow left" id="prevBg">â—€</div>
    <div class="arrow right" id="nextBg">â–¶</div>

    <div class="bottom-btn"><button id="startBtn">Start QnA</button></div>
  </div>

  <!-- QnA Screen -->
  <div id="qna" class="hidden">
    <div id="bg1" class="background active"></div>
    <div id="bg2" class="background"></div>

    <div id="question" class="question">[Intro duluâ€¦ tekan opsi untuk mulai]</div>
    <div id="option1" class="option">Opsi 1</div>
    <div id="option2" class="option">Opsi 2</div>
  </div>

  <audio id="music" loop></audio>

  <script>
    // --- Dragging Setup ---
    function makeDraggable(el) {
      let offsetX, offsetY, dragging = false;
      el.addEventListener("mousedown", (e) => {
        dragging = true;
        offsetX = e.clientX - el.offsetLeft;
        offsetY = e.clientY - el.offsetTop;
      });
      document.addEventListener("mousemove", (e) => {
        if (!dragging) return;
        el.style.left = e.clientX - offsetX + "px";
        el.style.top = e.clientY - offsetY + "px";
      });
      document.addEventListener("mouseup", () => dragging = false);
    }

    makeDraggable(document.getElementById("dummy-question"));
    makeDraggable(document.getElementById("dummy-option1"));
    makeDraggable(document.getElementById("dummy-option2"));

    // Elements
    const setup = document.getElementById("setup");
    const preview = document.getElementById("preview");
    const qna = document.getElementById("qna");
    const toPreviewBtn = document.getElementById("toPreviewBtn");
    const startBtn = document.getElementById("startBtn");
    const question = document.getElementById("question");
    const option1 = document.getElementById("option1");
    const option2 = document.getElementById("option2");
    const pquestion = document.getElementById("pquestion");
    const poption1 = document.getElementById("poption1");
    const poption2 = document.getElementById("poption2");
    const music = document.getElementById("music");

    let textColor, musicChoice;
    let bgIndex = 0;
    const previewBgs = [document.getElementById("pbg1"), document.getElementById("pbg2"), document.getElementById("pbg3")];

    // --- Go to Preview ---
    toPreviewBtn.addEventListener("click", () => {
      // ambil posisi dummy
      pquestion.style.left = document.getElementById("dummy-question").style.left;
      pquestion.style.top = document.getElementById("dummy-question").style.top;
      poption1.style.left = document.getElementById("dummy-option1").style.left;
      poption1.style.top = document.getElementById("dummy-option1").style.top;
      poption2.style.left = document.getElementById("dummy-option2").style.left;
      poption2.style.top = document.getElementById("dummy-option2").style.top;

      // warna teks
      textColor = document.getElementById("textColor").value;
      pquestion.style.color = textColor;
      poption1.style.color = textColor;
      poption2.style.color = textColor;

      // musik
      musicChoice = document.getElementById("musicSelect").value;
      music.src = musicChoice;
      music.play();

      setup.classList.add("hidden");
      preview.classList.remove("hidden");
    });

    // --- Switch Background in Preview ---
    function showPreviewBg(index) {
      previewBgs.forEach((bg, i) => {
        bg.classList.remove("active");
        bg.style.left = "100%";
        if (i === index) {
          bg.classList.add("active");
          bg.style.left = "0";
        }
      });
    }

    document.getElementById("prevBg").addEventListener("click", () => {
      bgIndex = (bgIndex - 1 + previewBgs.length) % previewBgs.length;
      showPreviewBg(bgIndex);
    });

    document.getElementById("nextBg").addEventListener("click", () => {
      bgIndex = (bgIndex + 1) % previewBgs.length;
      showPreviewBg(bgIndex);
    });

    // --- QnA Data ---
    let questions = [
      { q: "Apa warna favoritmu?", o1: "Ungu", o2: "Biru" },
      { q: "Kamu suka kopi?", o1: "Iya", o2: "Enggak" },
      { q: "Mau lanjut main?", o1: "Gas!", o2: "Udahan" }
    ];
    let qIndex = -1;
    const bg1 = document.getElementById("bg1");
    const bg2 = document.getElementById("bg2");
    let currentBg = bg1;

    // --- Start QnA ---
    startBtn.addEventListener("click", () => {
      // posisi
      question.style.left = pquestion.style.left;
      question.style.top = pquestion.style.top;
      option1.style.left = poption1.style.left;
      option1.style.top = poption1.style.top;
      option2.style.left = poption2.style.left;
      option2.style.top = poption2.style.top;

      // warna teks
      question.style.color = textColor;
      option1.style.color = textColor;
      option2.style.color = textColor;

      // background dari preview
      const chosenBg = previewBgs[bgIndex].style.backgroundImage;
      bg1.style.backgroundImage = chosenBg;
      bg2.style.backgroundImage = chosenBg;

      preview.classList.add("hidden");
      qna.classList.remove("hidden");
    });

    // --- Handle QnA ---
    function nextQuestion() {
      qIndex++;
      if (qIndex >= questions.length) {
        question.textContent = "ðŸŽ‰ Selesai! Makasih udah main!";
        option1.style.display = "none";
        option2.style.display = "none";
        return;
      }

      question.textContent = questions[qIndex].q;
      option1.textContent = questions[qIndex].o1;
      option2.textContent = questions[qIndex].o2;

      // slide background
      const nextBg = currentBg === bg1 ? bg2 : bg1;
      nextBg.classList.add("active");
      currentBg.classList.remove("active");
      setTimeout(() => {
        currentBg.style.left = "100%";
        currentBg = nextBg;
      }, 800);
    }

    option1.addEventListener("click", nextQuestion);
    option2.addEventListener("click", nextQuestion);
  </script>
</body>
</html>
